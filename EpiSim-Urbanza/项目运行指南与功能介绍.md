# æµè¡Œç—…å­¦å»ºæ¨¡é¡¹ç›® - å®Œæ•´è¿è¡ŒæŒ‡å—ä¸åŠŸèƒ½ä»‹ç»

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®æ ‡é¢˜**: "æ¥è§¦å‡å°‘ã€å¿«é€Ÿéš”ç¦»å’Œç–«è‹—æ¥ç§å¯¹åŸå¸‚ç–«æƒ…çˆ†å‘åŠ¨æ€å½±å“çš„å»ºæ¨¡ç ”ç©¶"

**æ ¸å¿ƒåˆ›æ–°**: æ··åˆç©ºé—´-è¡Œä¸ºæ¨¡å‹ï¼Œå®ç°äº†ä»ä¼ ç»Ÿå‡åŒ€æ··åˆSIRæ¨¡å‹åˆ°ç©ºé—´å¼‚è´¨æ€§åŠ¨æ€é€‚åº”æ¨¡å‹çš„é‡å¤§çªç ´ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡
```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. éªŒè¯å®‰è£…
python -c "import numpy, pandas, matplotlib, seaborn; print('âœ… ç¯å¢ƒå‡†å¤‡å®Œæˆ')"
```

### ä¸€é”®è¿è¡Œ
```bash
# ä¸»è¦æ¼”ç¤ºï¼ˆæ¨èé¦–æ¬¡è¿è¡Œï¼‰
python demo.py

# å®Œæ•´å¯è§†åŒ–ç”Ÿæˆ
python run_all_visualizations.py

# åŠŸèƒ½æµ‹è¯•
python test_all_functions.py
```

## ğŸ§¬ æ ¸å¿ƒæ¨¡å‹è¯¦è§£

### 1. åŸºç¡€SIRæ¨¡å‹ (`src/models/sir_model.py`)

**åŠŸèƒ½**: å®ç°ç¦»æ•£æ—¶é—´SIRä¼ æŸ“ç—…åŠ¨åŠ›å­¦æ¨¡å‹

**æ ¸å¿ƒä»£ç **:
```python
from src.models.sir_model import SIRModel

# åˆ›å»ºæ¨¡å‹
model = SIRModel(
    N=10000,      # æ€»äººå£
    beta=0.30,    # æ¥è§¦ç‡ (R0 = Î²/Î³ = 3.0)
    gamma=0.10,   # æ¢å¤ç‡ (å¹³å‡æ„ŸæŸ“æœŸ10å¤©)
    I0=10,        # åˆå§‹æ„ŸæŸ“è€…
    R0=0          # åˆå§‹æ¢å¤è€…
)

# è¿è¡Œæ¨¡æ‹Ÿ
results = model.simulate(days=120)
print(f"æ„ŸæŸ“å³°å€¼: {results['I_prop'].max():.3f}")
```

**è¾“å‡ºç»“æœ**:
- `S_prop`: æ˜“æ„Ÿè€…æ¯”ä¾‹æ—¶é—´åºåˆ—
- `I_prop`: æ„ŸæŸ“è€…æ¯”ä¾‹æ—¶é—´åºåˆ—  
- `R_prop`: æ¢å¤è€…æ¯”ä¾‹æ—¶é—´åºåˆ—
- `day`: æ—¶é—´æ­¥

### 2. SEIRæ‰©å±•æ¨¡å‹ (`src/models/seir_model.py`)

**åŠŸèƒ½**: å¢åŠ æ½œä¼æœŸcompartmentçš„SEIRæ¨¡å‹

**æ ¸å¿ƒä»£ç **:
```python
from src.models.seir_model import SEIRModel

# åˆ›å»ºSEIRæ¨¡å‹
model = SEIRModel(
    N=10000,
    beta=0.30,
    sigma=0.20,   # æ½œä¼æœŸè½¬æ¢ç‡ (å¹³å‡æ½œä¼æœŸ5å¤©)
    gamma=0.10,
    I0=10,
    E0=0,         # åˆå§‹æ½œä¼è€…
    R0=0
)

results = model.simulate(120)
```

**å…³é”®å·®å¼‚**: SEIRæ¨¡å‹çš„æ„ŸæŸ“å³°å€¼é€šå¸¸æ¯”SIRæ¨¡å‹ä½35-40%ï¼Œå³°å€¼æ—¶é—´å»¶åã€‚

### 3. ğŸ”¥ æ··åˆç©ºé—´-è¡Œä¸ºæ¨¡å‹ (`src/models/hybrid_model.py`)

**æ ¸å¿ƒåˆ›æ–°**: é¡¹ç›®æœ€å¤§äº®ç‚¹ï¼Œç»“åˆç©ºé—´å¼‚è´¨æ€§å’ŒåŠ¨æ€è¡Œä¸ºé€‚åº”

**åŠŸèƒ½ç‰¹æ€§**:
- **4ä¸ªç©ºé—´åŒºåŸŸ**: åŸå¸‚æ ¸å¿ƒã€éƒŠåŒºã€å†œæ‘ã€å·¥ä¸šåŒº
- **åŠ¨æ€è¡Œä¸ºé€‚åº”**: åŸºäºé£é™©æ„ŸçŸ¥çš„æ¥è§¦ç‡è°ƒæ•´
- **åŒºåŸŸé—´æµåŠ¨**: äººå£åœ¨ä¸åŒåŒºåŸŸé—´çš„ç§»åŠ¨
- **é˜ˆå€¼è§¦å‘å¹²é¢„**: è‡ªåŠ¨æ¿€æ´»è¡Œä¸ºæ”¹å˜

**æ ¸å¿ƒä»£ç **:
```python
from src.models.hybrid_model import HybridEpidemicModel

# åˆ›å»ºæ··åˆæ¨¡å‹
model = HybridEpidemicModel(
    N=10000,
    n_zones=4,                    # 4ä¸ªç©ºé—´åŒºåŸŸ
    base_beta=0.30,
    base_gamma=0.10,
    adaptation_factor=0.5,        # è¡Œä¸ºé€‚åº”å¼ºåº¦
    risk_threshold=0.05,          # é£é™©æ„ŸçŸ¥é˜ˆå€¼
    I0=10,
    R0=0
)

# è¿è¡Œæ¨¡æ‹Ÿ
results = model.simulate(120)

# è·å–åˆ›æ–°æŒ‡æ ‡
innovation_metrics = model.get_innovation_metrics(results)
print(f"è¡Œä¸ºé€‚åº”å¯åŠ¨æ—¥: {innovation_metrics['behavioral_adaptation_day']}")
print(f"åŒºåŸŸå³°å€¼å¼‚è´¨æ€§: {innovation_metrics['peak_heterogeneity']:.3f}")
```

**è¾“å‡ºç»“æœ**:
```python
{
    'aggregate_results': DataFrame,      # æ•´ä½“ç»“æœ
    'zone_results': [DataFrame],         # å„åŒºåŸŸç»“æœ
    'adaptation_history': DataFrame,     # è¡Œä¸ºé€‚åº”å†å²
    'zone_populations': [int],          # å„åŒºåŸŸäººå£
    'final_sizes': [float]              # å„åŒºåŸŸæœ€ç»ˆç–«æƒ…è§„æ¨¡
}
```

### 4. ç½‘ç»œä¼ æ’­æ¨¡å‹ (`src/models/network_model.py`)

**åŠŸèƒ½**: åŸºäºå¤æ‚ç½‘ç»œçš„ä»£ç†ä»¿çœŸ

**æ”¯æŒç½‘ç»œç±»å‹**:
- **å°ä¸–ç•Œç½‘ç»œ**: é«˜èšç±»ç³»æ•° + çŸ­è·¯å¾„é•¿åº¦
- **æ— æ ‡åº¦ç½‘ç»œ**: å¹‚å¾‹åº¦åˆ†å¸ƒ
- **éšæœºç½‘ç»œ**: æ³Šæ¾åº¦åˆ†å¸ƒ

**æ ¸å¿ƒä»£ç **:
```python
from src.models.network_model import NetworkEpidemicModel

# åˆ›å»ºç½‘ç»œæ¨¡å‹
model = NetworkEpidemicModel(
    N=1000,                    # ç½‘ç»œè§„æ¨¡
    network_type='small_world', # ç½‘ç»œç±»å‹
    infection_prob=0.05,       # æ„ŸæŸ“æ¦‚ç‡
    recovery_prob=0.10,        # æ¢å¤æ¦‚ç‡
    I0=5
)

results = model.simulate(100)
network_props = model.get_network_properties()
```

## ğŸ¯ å¹²é¢„åœºæ™¯ç³»ç»Ÿ

### åœºæ™¯ç±»å‹ (`src/scenarios/`)

**1. åŸºçº¿åœºæ™¯**:
```python
from src.scenarios.baseline import BaselineScenario

scenario = BaselineScenario()
results = scenario.run_simulation(120)
metrics = scenario.get_metrics(results)
```

**2. æ¥è§¦å‡å°‘åœºæ™¯**:
```python
from src.scenarios.interventions import ContactReductionScenario

# 30%æ¥è§¦å‡å°‘
scenario = ContactReductionScenario(reduction_percent=0.30)
results = scenario.run_simulation(120)
# æ•ˆæœ: æ„ŸæŸ“å³°å€¼å‡å°‘44%
```

**3. å¿«é€Ÿéš”ç¦»åœºæ™¯**:
```python
from src.scenarios.interventions import FasterIsolationScenario

# æ¢å¤ç‡æé«˜50%
scenario = FasterIsolationScenario(gamma_multiplier=1.5)
results = scenario.run_simulation(120)
# æ•ˆæœ: æ„ŸæŸ“å³°å€¼å‡å°‘35%
```

**4. ç–«è‹—æ¥ç§åœºæ™¯**:
```python
from src.scenarios.interventions import VaccinationScenario

# 40%äººå£é¢„å…ç–«
scenario = VaccinationScenario(vaccination_rate=0.40)
results = scenario.run_simulation(120)
# æ•ˆæœ: æ„ŸæŸ“å³°å€¼å‡å°‘77%
```

**5. ç»„åˆå¹²é¢„åœºæ™¯**:
```python
from src.scenarios.interventions import CombinedInterventionScenario

scenario = CombinedInterventionScenario()
results = scenario.run_simulation(120)
# æ•ˆæœ: æ„ŸæŸ“å³°å€¼å‡å°‘99.3%
```

## ğŸ“Š åˆ†æä¸æŒ‡æ ‡ç³»ç»Ÿ

### æ ¸å¿ƒæŒ‡æ ‡è®¡ç®— (`src/analysis/metrics.py`)

```python
from src.analysis.metrics import calculate_all_metrics, compare_scenarios

# å•åœºæ™¯æŒ‡æ ‡
metrics = calculate_all_metrics(results, N=10000)

# å…³é”®æŒ‡æ ‡
print(f"æ„ŸæŸ“å³°å€¼æ¯”ä¾‹: {metrics['peak_infection_proportion']:.3f}")
print(f"å³°å€¼æ—¶é—´: {metrics['time_to_peak']:.0f} å¤©")
print(f"æœ€ç»ˆç–«æƒ…è§„æ¨¡: {metrics['final_epidemic_size']:.3f}")
print(f"ç–«æƒ…æŒç»­æ—¶é—´: {metrics['epidemic_duration']:.0f} å¤©")

# å¤šåœºæ™¯å¯¹æ¯”
scenario_results = {
    'åŸºçº¿': baseline_results,
    'æ¥è§¦å‡å°‘': contact_reduction_results,
    'ç–«è‹—æ¥ç§': vaccination_results
}

comparison_df = compare_scenarios(scenario_results, N=10000)
print(comparison_df)
```

### æ•æ„Ÿæ€§åˆ†æ (`src/analysis/sensitivity.py`)

```python
from src.analysis.sensitivity import SensitivityAnalyzer

# åˆ›å»ºåˆ†æå™¨
analyzer = SensitivityAnalyzer(base_params={
    'N': 10000, 'beta': 0.30, 'gamma': 0.10, 'I0': 10, 'R0': 0
})

# Î²å‚æ•°æ•æ„Ÿæ€§
beta_range = [0.15, 0.20, 0.25, 0.30, 0.35, 0.40]
beta_analysis = analyzer.analyze_parameter('beta', beta_range)

# ç»¼åˆæ•æ„Ÿæ€§åˆ†æ
comprehensive = analyzer.comprehensive_sensitivity_analysis()
```

## ğŸ¨ å¯è§†åŒ–ç³»ç»Ÿ

### åŸºç¡€ç»˜å›¾ (`utils/visualization.py`)

```python
from utils.visualization import (
    plot_sir_timeseries, plot_seir_timeseries,
    plot_infection_comparison, plot_metrics_comparison
)

# SIRæ—¶é—´åºåˆ—å›¾
fig = plot_sir_timeseries(sir_results, "SIRæ¨¡å‹åŠ¨æ€")
plt.show()

# åœºæ™¯å¯¹æ¯”å›¾
fig = plot_infection_comparison(scenario_results, "å¹²é¢„æ•ˆæœå¯¹æ¯”")
plt.show()

# æŒ‡æ ‡å¯¹æ¯”å›¾
fig = plot_metrics_comparison(comparison_df, "å…³é”®æŒ‡æ ‡å¯¹æ¯”")
plt.show()
```

## ğŸ”§ æ‰‹åŠ¨è¿è¡Œç¤ºä¾‹

### å®Œæ•´å·¥ä½œæµç¨‹

```python
#!/usr/bin/env python3
"""å®Œæ•´çš„æ‰‹åŠ¨è¿è¡Œç¤ºä¾‹"""

import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from src.models.sir_model import SIRModel
from src.models.hybrid_model import HybridEpidemicModel
from src.scenarios.interventions import ContactReductionScenario
from src.analysis.metrics import compare_scenarios
from utils.visualization import plot_infection_comparison

def complete_analysis():
    """å®Œæ•´åˆ†ææµç¨‹"""
    
    # 1. åŸºç¡€æ¨¡å‹å¯¹æ¯”
    print("=== åŸºç¡€æ¨¡å‹å¯¹æ¯” ===")
    sir_model = SIRModel(N=10000, beta=0.30, gamma=0.10, I0=10)
    sir_results = sir_model.simulate(120)
    
    hybrid_model = HybridEpidemicModel(N=10000, base_beta=0.30, base_gamma=0.10, I0=10)
    hybrid_results = hybrid_model.simulate(120)
    
    print(f"æ ‡å‡†SIRå³°å€¼: {sir_results['I_prop'].max():.3f}")
    print(f"æ··åˆæ¨¡å‹å³°å€¼: {hybrid_results['aggregate_results']['I_prop'].max():.3f}")
    
    # 2. å¹²é¢„åœºæ™¯åˆ†æ
    print("\n=== å¹²é¢„åœºæ™¯åˆ†æ ===")
    scenarios = {
        'åŸºçº¿': sir_results,
        'æ··åˆæ¨¡å‹': hybrid_results['aggregate_results'],
        'æ¥è§¦å‡å°‘30%': ContactReductionScenario(0.30).run_simulation(120)
    }
    
    # 3. ç”Ÿæˆå¯¹æ¯”åˆ†æ
    comparison_df = compare_scenarios(scenarios, 10000)
    print(comparison_df)
    
    # 4. å¯è§†åŒ–
    fig = plot_infection_comparison(scenarios, "å®Œæ•´å¯¹æ¯”åˆ†æ")
    plt.savefig('complete_analysis.png', dpi=300, bbox_inches='tight')
    plt.show()
    
    return scenarios, comparison_df

if __name__ == "__main__":
    scenarios, comparison = complete_analysis()
```

## ğŸ“± Jupyter Notebookä½¿ç”¨

### ä¸»è¦åˆ†æç¬”è®°æœ¬ (`notebooks/main_analysis.ipynb`)

```python
# åœ¨Jupyterä¸­è¿è¡Œ
import sys
sys.path.append('..')

# å¯¼å…¥æ‰€æœ‰æ¨¡å—
from src.models import *
from src.scenarios import *
from src.analysis import *
from utils.visualization import *

# äº¤äº’å¼åˆ†æ
%matplotlib inline
plt.style.use('seaborn-v0_8')

# è¿è¡Œå®Œæ•´åˆ†æ
# ... (è¯¦ç»†åˆ†æä»£ç )
```

### å¿«é€Ÿæµ‹è¯•ç¬”è®°æœ¬ (`notebooks/quick_test.ipynb`)

ç”¨äºå¿«é€ŸéªŒè¯åŠŸèƒ½å’Œå‚æ•°è°ƒè¯•ã€‚

## ğŸ“ è¾“å‡ºæ–‡ä»¶è¯´æ˜

### è¿è¡Œåç”Ÿæˆçš„æ–‡ä»¶

**æ•°æ®æ–‡ä»¶**:
- `data/demo_results.csv` - ä¸»æ¼”ç¤ºç»“æœ
- `data/scenario_comparison.png` - åœºæ™¯å¯¹æ¯”å›¾
- `data/sir_sensitivity_summary.csv` - SIRæ•æ„Ÿæ€§åˆ†æ
- `data/seir_sensitivity_summary.csv` - SEIRæ•æ„Ÿæ€§åˆ†æ

**å¯è§†åŒ–æ–‡ä»¶** (è¿è¡Œ`run_all_visualizations.py`å):
- `all_visualizations/01_basic_models.png` - åŸºç¡€æ¨¡å‹å¯¹æ¯”
- `all_visualizations/02_intervention_scenarios.png` - å¹²é¢„åœºæ™¯
- `all_visualizations/03_intervention_metrics.png` - æ•ˆæœæŒ‡æ ‡
- `all_visualizations/04_hybrid_innovation.png` - æ··åˆæ¨¡å‹åˆ›æ–°
- `all_visualizations/05_sensitivity_analysis.png` - æ•æ„Ÿæ€§åˆ†æ
- `all_visualizations/06_network_models.png` - ç½‘ç»œæ¨¡å‹å¯¹æ¯”
- `all_visualizations/07_summary_dashboard.png` - ç»¼åˆä»ªè¡¨æ¿

## ğŸ¯ å…³é”®å‘ç°ä¸ç»“æœ

### ä¸»è¦ç ”ç©¶ç»“æœ

1. **æ¥è§¦å‡å°‘æ•ˆæœ**: 30%æ¥è§¦å‡å°‘ â†’ 44%å³°å€¼é™ä½
2. **å¿«é€Ÿéš”ç¦»æ•ˆæœ**: 50%æ¢å¤ç‡æå‡ â†’ 35%å³°å€¼é™ä½
3. **ç–«è‹—æ¥ç§æ•ˆæœ**: 40%é¢„å…ç–« â†’ 77%å³°å€¼é™ä½
4. **ç»„åˆå¹²é¢„æ•ˆæœ**: å¤šé‡å¹²é¢„ â†’ 99.3%å³°å€¼é™ä½
5. **æ··åˆæ¨¡å‹åˆ›æ–°**: ç©ºé—´å¼‚è´¨æ€§ + è¡Œä¸ºé€‚åº” â†’ 49%é¢å¤–å³°å€¼é™ä½

### åˆ›æ–°æ¨¡å‹ä¼˜åŠ¿

- **ç°å®æ€§**: è€ƒè™‘ç©ºé—´å¼‚è´¨æ€§å’Œäººç¾¤è¡Œä¸º
- **åŠ¨æ€æ€§**: å®æ—¶é£é™©æ„ŸçŸ¥å’Œé€‚åº”
- **æ”¿ç­–ç›¸å…³æ€§**: æä¾›å·®å¼‚åŒ–å¹²é¢„å»ºè®®
- **å¯æ‰©å±•æ€§**: æ”¯æŒå¤šç§ç½‘ç»œæ‹“æ‰‘å’Œå‚æ•°è®¾ç½®

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. å¯¼å…¥é”™è¯¯**:
```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
cd /path/to/project
python demo.py
```

**2. å¯è§†åŒ–é—®é¢˜**:
```python
# è®¾ç½®matplotlibåç«¯
import matplotlib
matplotlib.use('Agg')  # æœåŠ¡å™¨ç¯å¢ƒ
```

**3. å†…å­˜ä¸è¶³**:
```python
# å‡å°‘æ¨¡æ‹Ÿè§„æ¨¡
model = SIRModel(N=1000)  # è€Œä¸æ˜¯10000
```

## ğŸ“š æ‰©å±•ä½¿ç”¨

### è‡ªå®šä¹‰åœºæ™¯

```python
class CustomScenario:
    def __init__(self, custom_param):
        self.custom_param = custom_param
    
    def run_simulation(self, days=120):
        # è‡ªå®šä¹‰æ¨¡æ‹Ÿé€»è¾‘
        model = SIRModel(beta=self.custom_param)
        return model.simulate(days)
    
    def get_metrics(self, results):
        # è‡ªå®šä¹‰æŒ‡æ ‡è®¡ç®—
        return calculate_all_metrics(results, 10000)
```

### å‚æ•°ä¼˜åŒ–

```python
from scipy.optimize import minimize

def objective_function(params):
    """ä¼˜åŒ–ç›®æ ‡å‡½æ•°"""
    beta, gamma = params
    model = SIRModel(N=10000, beta=beta, gamma=gamma, I0=10)
    results = model.simulate(120)
    return results['I_prop'].max()  # æœ€å°åŒ–å³°å€¼

# è¿è¡Œä¼˜åŒ–
result = minimize(objective_function, [0.3, 0.1], 
                 bounds=[(0.1, 0.5), (0.05, 0.2)])
```

## ğŸ† é¡¹ç›®æ€»ç»“

è¿™ä¸ªæµè¡Œç—…å­¦å»ºæ¨¡é¡¹ç›®é€šè¿‡åˆ›æ–°çš„æ··åˆç©ºé—´-è¡Œä¸ºæ¨¡å‹ï¼Œå®ç°äº†ä»ä¼ ç»ŸSIR/SEIRæ¨¡å‹åˆ°ç°å®å¤æ‚ç³»ç»Ÿå»ºæ¨¡çš„é‡å¤§çªç ´ã€‚é¡¹ç›®ä¸ä»…æä¾›äº†å®Œæ•´çš„å»ºæ¨¡å·¥å…·é“¾ï¼Œè¿˜ä¸ºç–«æƒ…é˜²æ§æ”¿ç­–åˆ¶å®šæä¾›äº†ç§‘å­¦ä¾æ®å’Œé‡åŒ–æ”¯æŒã€‚

**æ ¸å¿ƒä»·å€¼**:
- ğŸ”¬ **ç§‘å­¦ä»·å€¼**: æ–¹æ³•å­¦åˆ›æ–°å’Œç†è®ºè´¡çŒ®
- ğŸ›ï¸ **æ”¿ç­–ä»·å€¼**: ä¸ºå…¬å…±å«ç”Ÿå†³ç­–æä¾›æ”¯æŒ
- ğŸ› ï¸ **å·¥ç¨‹ä»·å€¼**: å®Œæ•´çš„å¼€æºå»ºæ¨¡æ¡†æ¶
- ğŸ“š **æ•™è‚²ä»·å€¼**: ä¼˜ç§€çš„æ•™å­¦å’Œå­¦ä¹ èµ„æº

---

*æœ€åæ›´æ–°: 2024å¹´10æœˆ*
*é¡¹ç›®ç‰ˆæœ¬: v1.0*
*ä½œè€…: [é¡¹ç›®å›¢é˜Ÿ]*
